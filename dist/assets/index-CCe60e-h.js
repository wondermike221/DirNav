var er=Object.defineProperty;var tr=(e,t,r)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var X=(e,t,r)=>tr(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const rr=!1,nr=(e,t)=>e===t,ir=Symbol("solid-track"),_e={equals:nr};let ge=null,pt=wt;const le=1,Ce=2,vt={owned:null,cleanups:null,context:null,owner:null};var I=null;let Ke=null,or=null,F=null,G=null,ee=null,Ae=0;function ke(e,t){const r=F,n=I,i=e.length===0,o=t===void 0?n:t,a=i?vt:{owned:null,cleanups:null,context:o?o.context:null,owner:o},l=i?e:()=>e(()=>ne(()=>be(a)));I=a,F=null;try{return we(l,!0)}finally{F=r,I=n}}function D(e,t){t=t?Object.assign({},_e,t):_e;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(r.value)),yt(r,i));return[bt.bind(r),n]}function q(e,t,r){const n=ze(e,t,!1,le);ye(n)}function me(e,t,r){pt=hr;const n=ze(e,t,!1,le);n.user=!0,ee?ee.push(n):ye(n)}function J(e,t,r){r=r?Object.assign({},_e,r):_e;const n=ze(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,ye(n),bt.bind(n)}function ne(e){if(F===null)return e();const t=F;F=null;try{return e()}finally{F=t}}function Xe(e){me(()=>ne(e))}function Ne(e){return I===null||(I.cleanups===null?I.cleanups=[e]:I.cleanups.push(e)),e}function ar(e,t){ge||(ge=Symbol("error")),I=ze(void 0,void 0,!0),I.context={...I.context,[ge]:[t]};try{return e()}catch(r){Le(r)}finally{I=I.owner}}function lr(e,t){const r=Symbol("context");return{id:r,Provider:mr(r),defaultValue:e}}function sr(e){let t;return I&&I.context&&(t=I.context[e.id])!==void 0?t:e.defaultValue}function cr(e){const t=J(e),r=J(()=>Ue(t()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}function bt(){if(this.sources&&this.state)if(this.state===le)ye(this);else{const e=G;G=null,we(()=>Te(this),!1),G=e}if(F){const e=this.observers?this.observers.length:0;F.sources?(F.sources.push(this),F.sourceSlots.push(e)):(F.sources=[this],F.sourceSlots=[e]),this.observers?(this.observers.push(F),this.observerSlots.push(F.sources.length-1)):(this.observers=[F],this.observerSlots=[F.sources.length-1])}return this.value}function yt(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&we(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],a=Ke&&Ke.running;a&&Ke.disposed.has(o),(a?!o.tState:!o.state)&&(o.pure?G.push(o):ee.push(o),o.observers&&xt(o)),a||(o.state=le)}if(G.length>1e6)throw G=[],new Error},!1)),t}function ye(e){if(!e.fn)return;be(e);const t=Ae;dr(e,e.value,t)}function dr(e,t,r){let n;const i=I,o=F;F=I=e;try{n=e.fn(t)}catch(a){return e.pure&&(e.state=le,e.owned&&e.owned.forEach(be),e.owned=null),e.updatedAt=r+1,Le(a)}finally{F=o,I=i}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?yt(e,n):e.value=n,e.updatedAt=r)}function ze(e,t,r,n=le,i){const o={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:I,context:I?I.context:null,pure:r};return I===null||I!==vt&&(I.owned?I.owned.push(o):I.owned=[o]),o}function Ee(e){if(e.state===0)return;if(e.state===Ce)return Te(e);if(e.suspense&&ne(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Ae);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===le)ye(e);else if(e.state===Ce){const n=G;G=null,we(()=>Te(e,t[0]),!1),G=n}}function we(e,t){if(G)return e();let r=!1;t||(G=[]),ee?r=!0:ee=[],Ae++;try{const n=e();return ur(r),n}catch(n){r||(ee=null),G=null,Le(n)}}function ur(e){if(G&&(wt(G),G=null),e)return;const t=ee;ee=null,t.length&&we(()=>pt(t),!1)}function wt(e){for(let t=0;t<e.length;t++)Ee(e[t])}function hr(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:Ee(n)}for(t=0;t<r;t++)Ee(e[t])}function Te(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const i=n.state;i===le?n!==t&&(!n.updatedAt||n.updatedAt<Ae)&&Ee(n):i===Ce&&Te(n,t)}}}function xt(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=Ce,r.pure?G.push(r):ee.push(r),r.observers&&xt(r))}}function be(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),i=r.observers;if(i&&i.length){const o=i.pop(),a=r.observerSlots.pop();n<i.length&&(o.sourceSlots[a]=n,i[n]=o,r.observerSlots[n]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)be(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)be(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function fr(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ht(e,t,r){try{for(const n of t)n(e)}catch(n){Le(n,r&&r.owner||null)}}function Le(e,t=I){const r=ge&&t&&t.context&&t.context[ge],n=fr(e);if(!r)throw n;ee?ee.push({fn(){ht(n,r,t)},state:le}):ht(n,r,t)}function Ue(e){if(typeof e=="function"&&!e.length)return Ue(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Ue(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function mr(e,t){return function(n){let i;return q(()=>i=ne(()=>(I.context={...I.context,[e]:n.value},cr(()=>n.children))),void 0),i}}const gr=Symbol("fallback");function ft(e){for(let t=0;t<e.length;t++)e[t]()}function pr(e,t,r={}){let n=[],i=[],o=[],a=0,l=t.length>1?[]:null;return Ne(()=>ft(o)),()=>{let s=e()||[],c=s.length,h,d;return s[ir],ne(()=>{let y,x,k,_,B,C,R,T,K;if(c===0)a!==0&&(ft(o),o=[],n=[],i=[],a=0,l&&(l=[])),r.fallback&&(n=[gr],i[0]=ke(se=>(o[0]=se,r.fallback())),a=1);else if(a===0){for(i=new Array(c),d=0;d<c;d++)n[d]=s[d],i[d]=ke(v);a=c}else{for(k=new Array(c),_=new Array(c),l&&(B=new Array(c)),C=0,R=Math.min(a,c);C<R&&n[C]===s[C];C++);for(R=a-1,T=c-1;R>=C&&T>=C&&n[R]===s[T];R--,T--)k[T]=i[R],_[T]=o[R],l&&(B[T]=l[R]);for(y=new Map,x=new Array(T+1),d=T;d>=C;d--)K=s[d],h=y.get(K),x[d]=h===void 0?-1:h,y.set(K,d);for(h=C;h<=R;h++)K=n[h],d=y.get(K),d!==void 0&&d!==-1?(k[d]=i[h],_[d]=o[h],l&&(B[d]=l[h]),d=x[d],y.set(K,d)):o[h]();for(d=C;d<c;d++)d in k?(i[d]=k[d],o[d]=_[d],l&&(l[d]=B[d],l[d](d))):i[d]=ke(v);i=i.slice(0,a=c),n=s.slice(0)}return i});function v(y){if(o[d]=y,l){const[x,k]=D(d);return l[d]=k,t(s[d],x)}return t(s[d])}}}function M(e,t){return ne(()=>e(t||{}))}const vr=e=>`Stale read from <${e}>.`;function Pe(e){const t="fallback"in e&&{fallback:()=>e.fallback};return J(pr(()=>e.each,e.children,t||void 0))}function Z(e){const t=e.keyed,r=J(()=>e.when,void 0,void 0),n=t?r:J(r,void 0,{equals:(i,o)=>!i==!o});return J(()=>{const i=n();if(i){const o=e.children;return typeof o=="function"&&o.length>0?ne(()=>o(t?i:()=>{if(!ne(n))throw vr("Show");return r()})):o}return e.fallback},void 0,void 0)}let Se;function br(e){let t;const[r,n]=D(t,void 0);return Se||(Se=new Set),Se.add(n),Ne(()=>Se.delete(n)),J(()=>{let i;if(i=r()){const o=e.fallback;return typeof o=="function"&&o.length?ne(()=>o(i,()=>n())):o}return ar(()=>e.children,n)},void 0,void 0)}const ce=e=>J(()=>e());function yr(e,t,r){let n=r.length,i=t.length,o=n,a=0,l=0,s=t[i-1].nextSibling,c=null;for(;a<i||l<o;){if(t[a]===r[l]){a++,l++;continue}for(;t[i-1]===r[o-1];)i--,o--;if(i===a){const h=o<n?l?r[l-1].nextSibling:r[o-l]:s;for(;l<o;)e.insertBefore(r[l++],h)}else if(o===l)for(;a<i;)(!c||!c.has(t[a]))&&t[a].remove(),a++;else if(t[a]===r[o-1]&&r[l]===t[i-1]){const h=t[--i].nextSibling;e.insertBefore(r[l++],t[a++].nextSibling),e.insertBefore(r[--o],h),t[i]=r[o]}else{if(!c){c=new Map;let d=l;for(;d<o;)c.set(r[d],d++)}const h=c.get(t[a]);if(h!=null)if(l<h&&h<o){let d=a,v=1,y;for(;++d<i&&d<o&&!((y=c.get(t[d]))==null||y!==h+v);)v++;if(v>h-l){const x=t[a];for(;l<h;)e.insertBefore(r[l++],x)}else e.replaceChild(r[l++],t[a++])}else a++;else t[a++].remove()}}}const mt="_$DX_DELEGATE";function wr(e,t,r,n={}){let i;return ke(o=>{i=o,t===document?e():p(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{i(),t.textContent=""}}function S(e,t,r,n){let i;const o=()=>{const l=document.createElement("template");return l.innerHTML=e,l.content.firstChild},a=()=>(i||(i=o())).cloneNode(!0);return a.cloneNode=a,a}function ie(e,t=window.document){const r=t[mt]||(t[mt]=new Set);for(let n=0,i=e.length;n<i;n++){const o=e[n];r.has(o)||(r.add(o),t.addEventListener(o,xr))}}function H(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function De(e,t){t==null?e.removeAttribute("class"):e.className=t}function je(e,t,r,n){Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r}function qe(e,t,r){return ne(()=>e(t,r))}function p(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return Me(e,t,n,r);q(i=>Me(e,t(),i,r),n)}function xr(e){let t=e.target;const r=`$$${e.type}`,n=e.target,i=e.currentTarget,o=s=>Object.defineProperty(e,"target",{configurable:!0,value:s}),a=()=>{const s=t[r];if(s&&!t.disabled){const c=t[`${r}Data`];if(c!==void 0?s.call(t,c,e):s.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},l=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const s=e.composedPath();o(s[0]);for(let c=0;c<s.length-2&&(t=s[c],!!a());c++){if(t._$host){t=t._$host,l();break}if(t.parentNode===i)break}}else l();o(n)}function Me(e,t,r,n,i){for(;typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,a=n!==void 0;if(e=a&&r[0]&&r[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===r))return r;if(a){let l=r[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),r=ue(e,r,n,l)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||o==="boolean")r=ue(e,r,n);else{if(o==="function")return q(()=>{let l=t();for(;typeof l=="function";)l=l();r=Me(e,l,r,n)}),()=>r;if(Array.isArray(t)){const l=[],s=r&&Array.isArray(r);if(He(l,t,r,i))return q(()=>r=Me(e,l,r,n,!0)),()=>r;if(l.length===0){if(r=ue(e,r,n),a)return r}else s?r.length===0?gt(e,l,n):yr(e,r,l):(r&&ue(e),gt(e,l));r=l}else if(t.nodeType){if(Array.isArray(r)){if(a)return r=ue(e,r,n,t);ue(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function He(e,t,r,n){let i=!1;for(let o=0,a=t.length;o<a;o++){let l=t[o],s=r&&r[e.length],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))i=He(e,l,s)||i;else if(c==="function")if(n){for(;typeof l=="function";)l=l();i=He(e,Array.isArray(l)?l:[l],Array.isArray(s)?s:[s])||i}else e.push(l),i=!0;else{const h=String(l);s&&s.nodeType===3&&s.data===h?e.push(s):e.push(document.createTextNode(h))}}return i}function gt(e,t,r=null){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],r)}function ue(e,t,r,n){if(r===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const l=t[a];if(i!==l){const s=l.parentNode===e;!o&&!a?s?e.replaceChild(i,l):e.insertBefore(i,r):s&&l.remove()}else o=!0}}else e.insertBefore(i,r);return[i]}const $t=lr(),St=()=>{const e=sr($t);if(!e)throw new Error("useTitle must be used within a TitleProvider");return e};var $r=S('<nav id=breadcrumbs class=breadcrumbs-container aria-label="Directory breadcrumb navigation"><ol class=breadcrumb-list role=list>'),Sr=S("<li class=breadcrumb-list-item role=listitem>"),kr=S('<button class="breadcrumb-item clickable">'),_r=S("<span class=breadcrumb-item>"),Cr=S("<span class=breadcrumb-separator aria-hidden=true>/");const Er=()=>{const{title:e,setTitle:t}=St();return(()=>{var r=$r(),n=r.firstChild;return p(n,M(Pe,{get each(){return e()},children:(i,o)=>(()=>{var a=Sr();return p(a,(()=>{var l=ce(()=>!!i.isClickable);return()=>l()?(()=>{var s=kr();return s.$$click=()=>t(i.path),p(s,()=>i.name),q(c=>{var h=`breadcrumb-${o()}`,d=`Navigate to ${i.name} directory`,v=o()===e().length-1?"page":void 0;return h!==c.e&&H(s,"id",c.e=h),d!==c.t&&H(s,"aria-label",c.t=d),v!==c.a&&H(s,"aria-current",c.a=v),c},{e:void 0,t:void 0,a:void 0}),s})():(()=>{var s=_r();return p(s,()=>i.name),q(c=>{var h=`breadcrumb-${o()}`,d=o()===e().length-1?"page":void 0;return h!==c.e&&H(s,"id",c.e=h),d!==c.t&&H(s,"aria-current",c.t=d),c},{e:void 0,t:void 0}),s})()})(),null),p(a,(()=>{var l=ce(()=>o()<e().length-1);return()=>l()&&Cr()})(),null),a})()})),r})()};ie(["click"]);const Tr=':root{--bg-color: hsla(220, 13%, 95%, 1);--window-bg: hsla(0, 0%, 100%, 1);--window-border: hsla(0, 0%, 80%, 1);--window-shadow: hsla(0, 0%, 0%, .1);--title-bar-bg: hsla(0, 0%, 94%, 1);--text-color: hsla(0, 0%, 20%, 1);--item-border: hsla(0, 0%, 93%, 1);--item-hover-bg: hsla(0, 0%, 98%, 1);--pagination-dot-active: hsla(0, 0%, 20%, 1);--pagination-dot-inactive: hsla(0, 0%, 80%, 1);--breadcrumb-text-color: hsla(0, 0%, 53%, 1);--resize-handle-bg: hsla(0, 0%, 0%, .1);--focus-ring-color: hsla(210, 100%, 56%, 1)}.dirnav-dark-mode{--window-bg: hsla(0, 0%, 17%, 1);--window-border: hsla(0, 0%, 33%, 1);--window-shadow: hsla(0, 0%, 0%, .5);--title-bar-bg: hsla(0, 0%, 23%, 1);--text-color: hsla(0, 0%, 93%, 1);--item-border: hsla(0, 0%, 27%, 1);--item-hover-bg: hsla(0, 0%, 24%, 1);--pagination-dot-active: hsla(0, 0%, 93%, 1);--pagination-dot-inactive: hsla(0, 0%, 47%, 1);--breadcrumb-text-color: hsla(0, 0%, 67%, 1);--resize-handle-bg: hsla(0, 0%, 100%, .1);--focus-ring-color: hsla(210, 100%, 56%, 1)}#dirnav-window{border:1px solid var(--window-border);transition:border-color .2s ease-in-out,box-shadow .2s ease-in-out;background-color:var(--window-bg);box-shadow:0 2px 10px var(--window-shadow)}#dirnav-window:focus-within{border-color:var(--focus-ring-color);box-shadow:0 0 0 2px var(--focus-ring-color)}.title-bar{background-color:var(--title-bar-bg);padding:8px;cursor:grab;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--window-border);-webkit-user-select:none;user-select:none}.title-bar button{background:none;border:1px solid var(--window-border);padding:4px 8px;margin-left:5px;cursor:pointer;border-radius:3px;color:var(--text-color)}.title-bar button:hover{background-color:var(--item-hover-bg)}.title-bar button:disabled{cursor:not-allowed;opacity:.5}#breadcrumbs{padding:5px 10px;font-size:.9em;color:var(--breadcrumb-text-color);border-bottom:1px solid var(--item-border)}.breadcrumb-item.clickable{cursor:pointer;text-decoration:underline}#window-content{flex:1;overflow:auto;padding:10px;background-color:var(--window-bg)}#resize-handle{position:absolute;bottom:0;right:0;width:15px;height:15px;cursor:nwse-resize;background-color:var(--resize-handle-bg);border-top-left-radius:5px}.main-nav-item button{background:none;border:none;padding:5px 0;width:100%;text-align:left;cursor:pointer;color:var(--text-color)}.main-nav-item button:hover{background-color:var(--item-hover-bg)}.main-nav-item:last-child{border-bottom:none}#pagination-dots{text-align:center;margin-top:10px}.pagination-dot{display:inline-block;width:8px;height:8px;border-radius:50%;background-color:var(--pagination-dot-inactive);margin:0 4px}#command-palette-input,#input-mode-input{width:100%;padding:5px;margin-bottom:10px;background-color:var(--window-bg);color:var(--text-color);border:1px solid var(--window-border);box-sizing:border-box}#command-palette-results{max-height:200px;overflow-y:auto;border:1px solid var(--item-border);list-style:none;padding:0;margin:0}.command-palette-result{padding:8px 12px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}.command-palette-result:hover{background-color:var(--item-hover-bg)}.command-palette-result.selected{background-color:var(--focus-ring-color);color:#fff}.command-palette-result.selected .command-palette-result-path{color:#fffc}.command-palette-result-path{color:var(--breadcrumb-text-color);font-size:.8em}#input-mode-controls{margin-top:10px;text-align:right}#input-mode-cancel-button{margin-right:10px}.dirnav-error-boundary,.dirnav-navigation-error,.dirnav-command-palette-error,.dirnav-virtual-directory-error{padding:20px;margin:10px;border:2px solid #ff6b6b;border-radius:8px;background-color:#fff5f5;color:#d63031;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.dirnav-dark-mode .dirnav-error-boundary,.dirnav-dark-mode .dirnav-navigation-error,.dirnav-dark-mode .dirnav-command-palette-error,.dirnav-dark-mode .dirnav-virtual-directory-error{background-color:#2d1b1b;color:#ff7675;border-color:#d63031}.dirnav-error-content h3{margin:0 0 12px;font-size:18px;font-weight:600;color:#d63031}.dirnav-dark-mode .dirnav-error-content h3{color:#ff7675}.dirnav-error-content p{margin:8px 0;line-height:1.5}.dirnav-error-specific{margin:12px 0;padding:12px;background-color:#ffeaa7;border-left:4px solid #fdcb6e;border-radius:4px}.dirnav-dark-mode .dirnav-error-specific{background-color:#2d2a1b;border-left-color:#f39c12;color:#f39c12}.dirnav-error-specific ul{margin:8px 0;padding-left:20px}.dirnav-error-specific li{margin:4px 0}.dirnav-error-details{margin:12px 0;border:1px solid #ddd;border-radius:4px}.dirnav-dark-mode .dirnav-error-details{border-color:#555}.dirnav-error-details summary{padding:8px 12px;background-color:#f8f9fa;cursor:pointer;font-weight:500}.dirnav-dark-mode .dirnav-error-details summary{background-color:#2c2c2c;color:#e0e0e0}.dirnav-error-details pre{margin:0;padding:12px;background-color:#f1f3f4;border-top:1px solid #ddd;font-family:Monaco,Menlo,Ubuntu Mono,monospace;font-size:12px;line-height:1.4;overflow-x:auto;white-space:pre-wrap;word-break:break-word}.dirnav-dark-mode .dirnav-error-details pre{background-color:#1e1e1e;border-top-color:#555;color:#e0e0e0}.dirnav-error-stack{max-height:200px;overflow-y:auto}.dirnav-error-actions{display:flex;gap:8px;margin-top:16px;flex-wrap:wrap}.dirnav-error-actions button{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:background-color .2s ease}.dirnav-error-retry-btn{background-color:#00b894;color:#fff}.dirnav-error-retry-btn:hover{background-color:#00a085}.dirnav-error-reload-btn,.dirnav-error-home-btn,.dirnav-error-back-btn{background-color:#0984e3;color:#fff}.dirnav-error-reload-btn:hover,.dirnav-error-home-btn:hover,.dirnav-error-back-btn:hover{background-color:#0770c4}.dirnav-error-close-btn,.dirnav-error-fallback-btn{background-color:#636e72;color:#fff}.dirnav-error-close-btn:hover,.dirnav-error-fallback-btn:hover{background-color:#2d3436}.dirnav-error-warning{margin-top:12px;padding:8px 12px;background-color:#fab1a0;border-left:4px solid #e17055;border-radius:4px;font-weight:500}.dirnav-dark-mode .dirnav-error-warning{background-color:#2d1f1b;border-left-color:#e17055;color:#fab1a0}.dirnav-error-loading{display:flex;align-items:center;gap:8px;padding:12px;background-color:#e3f2fd;border:1px solid #2196f3;border-radius:4px;color:#1976d2}.dirnav-dark-mode .dirnav-error-loading{background-color:#1a2332;border-color:#2196f3;color:#64b5f6}.dirnav-error-loading:before{content:"";width:16px;height:16px;border:2px solid #2196f3;border-top:2px solid transparent;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dirnav-error-loading span{font-weight:500}.dirnav-error-loading small{display:block;margin-top:4px;opacity:.8;font-size:12px}.dirnav-loading-error{margin-top:8px;padding:4px 8px;background-color:#ff6b6b1a;border-left:3px solid #ff6b6b;border-radius:2px}.dirnav-dark-mode .dirnav-loading-error{background-color:#ff76751a;border-left-color:#ff7675}.dirnav-loading-error small{color:#d63031;margin:0}.dirnav-dark-mode .dirnav-loading-error small{color:#ff7675}.dirnav-virtual-status{display:flex;align-items:center;gap:8px;padding:8px 12px;margin:8px 0;border-radius:4px;font-size:14px}.dirnav-virtual-status.success{background-color:#d4edda;border:1px solid #c3e6cb;color:#155724}.dirnav-dark-mode .dirnav-virtual-status.success{background-color:#1b2e1b;border-color:#28a745;color:#28a745}.dirnav-virtual-status.error{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.dirnav-dark-mode .dirnav-virtual-status.error{background-color:#2e1b1b;border-color:#dc3545;color:#dc3545}.dirnav-virtual-status.warning{background-color:#fff3cd;border:1px solid #ffeaa7;color:#856404}.dirnav-dark-mode .dirnav-virtual-status.warning{background-color:#2e2a1b;border-color:#ffc107;color:#ffc107}.dirnav-virtual-status:before{content:"";width:8px;height:8px;border-radius:50%;flex-shrink:0}.dirnav-virtual-status.success:before{background-color:#28a745}.dirnav-virtual-status.error:before{background-color:#dc3545}.dirnav-virtual-status.warning:before{background-color:#ffc107}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}@media (prefers-contrast: high){:root{--window-border: hsla(0, 0%, 0%, 1);--focus-ring-color: hsla(0, 0%, 0%, 1);--text-color: hsla(0, 0%, 0%, 1);--item-border: hsla(0, 0%, 0%, 1)}.dirnav-dark-mode{--window-border: hsla(0, 0%, 100%, 1);--focus-ring-color: hsla(0, 0%, 100%, 1);--text-color: hsla(0, 0%, 100%, 1);--item-border: hsla(0, 0%, 100%, 1)}}.title-bar button:focus,.main-nav-item button:focus,.breadcrumb-item.clickable:focus,.command-palette-result:focus,#command-palette-input:focus,#input-mode-input:focus{outline:2px solid var(--focus-ring-color);outline-offset:2px}.keyboard-shortcut-indicator{position:absolute;right:8px;top:50%;transform:translateY(-50%);background-color:var(--breadcrumb-text-color);color:var(--window-bg);border-radius:3px;padding:2px 6px;font-size:.75em;font-weight:700;opacity:.7}.nav-item-button{position:relative;display:flex;justify-content:space-between;align-items:center;width:100%;padding:8px 12px;text-align:left}.nav-item-content{display:flex;flex-direction:column;align-items:flex-start}.nav-item-name{font-weight:500}.nav-item-type{font-size:.8em;opacity:.7;margin-top:2px}.nav-item-value{font-size:.85em;opacity:.8;color:var(--breadcrumb-text-color);font-style:italic;margin-left:4px}.breadcrumb-list{display:flex;align-items:center;list-style:none;margin:0;padding:0;gap:4px}.breadcrumb-list-item{display:flex;align-items:center}.breadcrumb-item.clickable{background:none;border:none;color:var(--breadcrumb-text-color);cursor:pointer;text-decoration:underline;padding:2px 4px;border-radius:2px}.breadcrumb-item.clickable:hover{background-color:var(--item-hover-bg)}.breadcrumb-separator{margin:0 4px;color:var(--breadcrumb-text-color)}.command-palette-result-name{font-weight:500}.command-palette-result-path{color:var(--breadcrumb-text-color);font-size:.8em;margin-left:auto;opacity:.7}.pagination-container{display:flex;align-items:center;justify-content:center;gap:8px}.pagination-dot{display:inline-block;width:8px;height:8px;border-radius:50%;background-color:var(--pagination-dot-inactive)}.pagination-dot.active{background-color:var(--pagination-dot-active)}@media (prefers-reduced-motion: reduce){*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}#dirnav-window{min-width:20vw;max-width:90vw;min-height:20vh;max-height:90vh}@media (max-width: 767px){#dirnav-window{min-width:85vw;max-width:95vw;min-height:60vh;max-height:85vh}.title-bar{padding:12px 8px;font-size:16px}.title-bar button{padding:8px 12px;margin-left:8px;min-height:44px;min-width:44px;font-size:16px}#window-content{padding:12px}.main-nav-item button{padding:12px 8px;font-size:16px;min-height:44px}.keyboard-shortcut-indicator{font-size:14px;padding:4px 8px}#breadcrumbs{padding:8px 12px;font-size:16px}.breadcrumb-item.clickable{padding:4px 8px;min-height:32px;display:inline-flex;align-items:center}#resize-handle{width:20px;height:20px}#command-palette-input,#input-mode-input{padding:12px;font-size:16px;min-height:44px}.command-palette-result{padding:12px;min-height:44px}.pagination-dot{width:12px;height:12px;margin:0 6px}}@media (min-width: 768px) and (max-width: 1024px){#dirnav-window{min-width:30vw;max-width:70vw;min-height:30vh;max-height:80vh}.title-bar button{min-height:36px;min-width:36px}.main-nav-item button{min-height:36px}}@media (min-width: 1025px){#dirnav-window{min-width:20vw;max-width:60vw;min-height:20vh;max-height:70vh}}@media (hover: none) and (pointer: coarse){.title-bar button,.main-nav-item button,.breadcrumb-item.clickable,.command-palette-result{min-height:44px;min-width:44px}.title-bar button:hover,.main-nav-item button:hover,.breadcrumb-item.clickable:hover,.command-palette-result:hover{background-color:var(--item-hover-bg);transform:scale(1.02)}.title-bar button:hover,.main-nav-item button:hover{background-color:var(--item-hover-bg)}}@media (-webkit-min-device-pixel-ratio: 2),(min-resolution: 192dpi){#resize-handle{background-size:8px 8px}.pagination-dot{border:1px solid var(--pagination-dot-active)}.pagination-dot.active{border-color:var(--pagination-dot-active)}}@media (max-width: 767px) and (orientation: landscape){#dirnav-window{min-width:60vw;max-width:80vw;min-height:70vh;max-height:90vh}}@media (max-width: 767px) and (orientation: portrait){#dirnav-window{min-width:85vw;max-width:95vw;min-height:50vh;max-height:80vh}}@media (prefers-contrast: more){:root{--text-color: hsla(0, 0%, 0%, 1);--breadcrumb-text-color: hsla(0, 0%, 30%, 1);--window-border: hsla(0, 0%, 0%, 1)}.dirnav-dark-mode{--text-color: hsla(0, 0%, 100%, 1);--breadcrumb-text-color: hsla(0, 0%, 80%, 1);--window-border: hsla(0, 0%, 100%, 1)}}';function Pr(e,t={}){const{hostId:r="dirnav-shadow-host",attachToBody:n=!0,hostElement:i,injectStyles:o=!0,customStyles:a=""}=t,l=i||document.createElement("div");i||(l.id=r);const s=l.attachShadow({mode:"open"}),c=document.createElement("div");if(c.id="dirnav-shadow-root",o){const d=document.createElement("style");d.textContent=Tr+(a?`
`+a:""),s.appendChild(d)}s.appendChild(c),n&&!l.parentNode&&document.body.appendChild(l);const h=wr(e,c);return{host:l,shadowRoot:s,mountPoint:c,dispose:h,destroy(){h(),l.parentNode&&l.parentNode.removeChild(l)},attachTo(d){l.parentNode&&l.parentNode.removeChild(l),d.appendChild(l)}}}function xe(e){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}function Dr(e){const t=xe(e);return t?t.host:null}function Mr(e){if(document.activeElement===e||e.contains(document.activeElement))return!0;const t=Dr(e);if(t){if(document.activeElement===t)return!0;const r=xe(e);if(r&&r.activeElement)return e===r.activeElement||e.contains(r.activeElement)}return!1}class Ir{constructor(){X(this,"listeners",new Map)}addEventListener(t,r,n,i){let o;t==="document"?o=document:t==="window"?o=window:o=t;const a=`${r}_${Date.now()}_${Math.random()}`;return o.addEventListener(r,n,i),this.listeners.set(a,{element:o,type:r,handler:n,options:i}),a}removeEventListener(t){const r=this.listeners.get(t);r&&(r.element.removeEventListener(r.type,r.handler,r.options),this.listeners.delete(t))}removeAllEventListeners(){for(const[,t]of this.listeners)t.element.removeEventListener(t.type,t.handler,t.options);this.listeners.clear()}getEventTarget(t){return xe(t)?document:t}}function kt(){return new Ir}function Rr(e,t,r){const n=Mr(t);r(e,n)}function re(e){e.focus();const t=xe(e);if(t){const r=t.host;r&&r.tabIndex>=0&&r.focus()}}function We(e){e.blur();const t=xe(e);if(t){const r=t.host;r&&document.activeElement===r&&r.blur()}}function _t(e){re(e),(e.type==="text"||e.tagName.toLowerCase()==="input")&&setTimeout(()=>{e.focus(),e.value&&e.setSelectionRange(e.value.length,e.value.length)},0)}var Ar=S('<div id=dirnav-window tabindex=-1 role=dialog aria-label="Directory Navigation Window"aria-modal=false><header class=title-bar role=banner><div class=title-bar-controls></div><div id=window-title class=title-bar-title role=heading aria-level=1></div><div class=window-controls><button id=resize-button tabindex=-1 aria-label="Reset window to default size and position">&#9723;</button><button id=close-button tabindex=-1 aria-label="Close directory navigation window">X</button></div></header><main id=window-content class=window-content role=main aria-live=polite></main><div id=resize-handle class=resize-handle aria-label="Resize window"role=button tabindex=-1>'),Nr=S("<button id=command-palette-button tabindex=-1>"),zr=S('<button id=back-button tabindex=-1 aria-label="Go back to parent directory">&#8592;');const Lr=e=>{const{title:t}=St(),r=()=>{const m=window.innerWidth,$=window.innerHeight,O=m<768,P=m>=768&&m<=1024;return O?{position:{x:m*.025,y:$*.075},size:{width:m*.9,height:$*.7}}:P?{position:{x:m*.15,y:$*.1},size:{width:m*.5,height:$*.5}}:{position:{x:m*.375,y:$*.375},size:{width:m*.25,height:$*.25}}},n=()=>{try{const m=localStorage.getItem("dirnav-window-position");if(m){const $=JSON.parse(m),O=window.innerWidth,P=window.innerHeight;if($.x>=0&&$.x<O*.9&&$.y>=0&&$.y<P*.9)return $}return r().position}catch(m){return console.error("Failed to parse stored position, using default:",m),r().position}},i=()=>{try{const m=localStorage.getItem("dirnav-window-size");if(m){const $=JSON.parse(m),O=window.innerWidth,P=window.innerHeight,U=Math.min(O*.2,200),z=Math.min(P*.2,150);if($.width>=U&&$.height>=z&&$.width<=O*.95&&$.height<=P*.95)return $}return r().size}catch(m){return console.error("Failed to parse stored size, using default:",m),r().size}},[o,a]=D(n()),[l,s]=D(i()),[c,h]=D(!1),[d,v]=D(!1),[y,x]=D({x:0,y:0});let k;const _=kt(),B=m=>{if(m.button!==0&&m.pointerType==="mouse")return;const $=m.target;$.classList.contains("title-bar")||$.closest(".title-bar")?(h(!0),x({x:m.clientX-o().x,y:m.clientY-o().y}),m.preventDefault()):$.classList.contains("resize-handle")&&(v(!0),x({x:m.clientX,y:m.clientY}),m.preventDefault())},C=m=>{if(m.button!==0)return;const $=m.target;$.classList.contains("title-bar")||$.closest(".title-bar")?(h(!0),x({x:m.clientX-o().x,y:m.clientY-o().y})):$.classList.contains("resize-handle")&&(v(!0),x({x:m.clientX,y:m.clientY}))},R=m=>{if(c()){const $=window.innerWidth,O=window.innerHeight,P={x:Math.max(0,Math.min($-100,m.clientX-y().x)),y:Math.max(0,Math.min(O-50,m.clientY-y().y))};a(P),localStorage.setItem("dirnav-window-position",JSON.stringify(P))}else if(d()){const $=k==null?void 0:k.querySelector(".title-bar"),O=k==null?void 0:k.querySelector("#breadcrumbs"),P=(($==null?void 0:$.offsetHeight)||40)+((O==null?void 0:O.offsetHeight)||30)+100,U=window.innerWidth,z=window.innerHeight,Y=U<768,oe=Y?Math.min(U*.8,300):Math.min(U*.2,200),A=Y?U*.95:U*.9,L=Y?z*.9:z*.85,W={width:Math.max(oe,Math.min(A,l().width+(m.clientX-y().x))),height:Math.max(P,Math.min(L,l().height+(m.clientY-y().y)))};s(W),localStorage.setItem("dirnav-window-size",JSON.stringify(W)),x({x:m.clientX,y:m.clientY})}},T=()=>{h(!1),v(!1)};Xe(()=>{_.addEventListener("document","mousemove",R),_.addEventListener("document","mouseup",T),_.addEventListener("document","touchmove",R),_.addEventListener("document","touchend",T),_.addEventListener("document","pointermove",R),_.addEventListener("document","pointerup",T);const m=()=>{const $=window.innerWidth,O=window.innerHeight,P=o(),U=l(),z=$-Math.min(U.width,100),Y=O-50;if(P.x>z||P.y>Y){const L={x:Math.max(0,Math.min(z,P.x)),y:Math.max(0,Math.min(Y,P.y))};a(L),localStorage.setItem("dirnav-window-position",JSON.stringify(L))}const oe=$*.95,A=O*.9;if(U.width>oe||U.height>A){const L={width:Math.min(U.width,oe),height:Math.min(U.height,A)};s(L),localStorage.setItem("dirnav-window-size",JSON.stringify(L))}};_.addEventListener("window","resize",m)}),Ne(()=>{_.removeAllEventListeners()});const K=()=>{e.onClose&&e.onClose()},se=()=>{const m=r();a(m.position),s(m.size),localStorage.setItem("dirnav-window-position",JSON.stringify(m.position)),localStorage.setItem("dirnav-window-size",JSON.stringify(m.size))};return(()=>{var m=Ar(),$=m.firstChild,O=$.firstChild,P=O.nextSibling,U=P.nextSibling,z=U.firstChild,Y=z.nextSibling,oe=$.nextSibling;return m.$$pointerdown=B,m.$$mousedown=C,qe(A=>{k=A,e.ref&&e.ref(A)},m),m.style.setProperty("position","fixed"),m.style.setProperty("z-index","1000"),m.style.setProperty("display","flex"),m.style.setProperty("flex-direction","column"),p(O,(()=>{var A=ce(()=>!!e.backButtonDisabled);return()=>A()?(()=>{var L=Nr();return L.$$mousedown=W=>W.preventDefault(),je(L,"click",e.onCommandPalette),p(L,()=>e.commandPaletteMode?"×":">"),q(W=>{var j=e.commandPaletteMode?"Close command palette":"Open command palette",ae=e.commandPaletteMode;return j!==W.e&&H(L,"aria-label",W.e=j),ae!==W.t&&H(L,"aria-expanded",W.t=ae),W},{e:void 0,t:void 0}),L})():(()=>{var L=zr();return L.$$mousedown=W=>W.preventDefault(),je(L,"click",e.onBack),L})()})()),p(P,()=>t()[t().length-1].name),z.$$mousedown=A=>A.preventDefault(),z.$$click=se,Y.$$mousedown=A=>A.preventDefault(),Y.$$click=K,p(m,M(Er,{}),oe),p(oe,()=>e.children),q(A=>{var L=`dirnav-window ${e.componentThemeClass||""}`,W=`${o().x}px`,j=`${o().y}px`,ae=`${l().width}px`,te=`${l().height}px`;return L!==A.e&&De(m,A.e=L),W!==A.t&&((A.t=W)!=null?m.style.setProperty("left",W):m.style.removeProperty("left")),j!==A.a&&((A.a=j)!=null?m.style.setProperty("top",j):m.style.removeProperty("top")),ae!==A.o&&((A.o=ae)!=null?m.style.setProperty("width",ae):m.style.removeProperty("width")),te!==A.i&&((A.i=te)!=null?m.style.setProperty("height",te):m.style.removeProperty("height")),A},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),m})()};ie(["mousedown","pointerdown","click"]);function Or(e,t=300){const[r,n]=D(e),[i,o]=D(e);let a;return[i,s=>{n(s),a!==void 0&&clearTimeout(a),a=setTimeout(()=>{o(s),a=void 0},t)}]}function Vr(e,t=100){let r=0,n;return(...i)=>{const o=Date.now();if(o-r>=t)return r=o,e(...i);n!==void 0&&clearTimeout(n),n=setTimeout(()=>{r=Date.now(),e(...i),n=void 0},t-(o-r))}}class Ie{constructor(t=100){X(this,"cache",new Map);X(this,"maxSize");this.maxSize=t}get(t){const r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Je(e,t,r=100){const n=new Ie(r),o=t||((...a)=>JSON.stringify(a));return(...a)=>{const l=o(...a),s=n.get(l);if(s!==void 0)return s;const c=e(...a);return n.set(l,c),c}}class Fr{constructor(){X(this,"loadingPromises",new Map);X(this,"cache",new Ie(50));X(this,"loadingStates",new Map)}async load(t,r,n={}){const{forceReload:i=!1,timeout:o=1e4}=n;if(!i){const s=this.cache.get(t);if(s!==void 0)return{data:s,isLoading:!1,error:null}}const a=this.loadingPromises.get(t);if(a&&!i)try{return{data:await a,isLoading:!1,error:null}}catch(s){return{data:null,isLoading:!1,error:s}}this.loadingStates.set(t,!0);const l=Promise.race([r(),new Promise((s,c)=>setTimeout(()=>c(new Error("Timeout")),o))]);this.loadingPromises.set(t,l);try{const s=await l;return this.cache.set(t,s),this.loadingStates.set(t,!1),this.loadingPromises.delete(t),{data:s,isLoading:!1,error:null}}catch(s){return this.loadingStates.set(t,!1),this.loadingPromises.delete(t),{data:null,isLoading:!1,error:s}}}isLoading(t){return this.loadingStates.get(t)||!1}clearCache(){this.cache.clear(),this.loadingPromises.clear(),this.loadingStates.clear()}getCacheSize(){return this.cache.size()}}class Br{constructor(){X(this,"measurements",new Map)}start(t){const r=performance.now();return()=>{const i=performance.now()-r;this.measurements.has(t)||this.measurements.set(t,[]);const o=this.measurements.get(t);o.push(i),o.length>100&&o.shift()}}getStats(t){const r=this.measurements.get(t);if(!r||r.length===0)return null;const i=r.reduce((l,s)=>l+s,0)/r.length,o=Math.min(...r),a=Math.max(...r);return{avg:i,min:o,max:a,count:r.length}}clear(){this.measurements.clear()}}const Re=new Br,Kr={maxResults:50,minScore:.1,pathWeight:.3,nameWeight:.7,sequenceWeight:2,exactMatchBonus:100,prefixMatchBonus:50};class Ct{constructor(t={}){X(this,"options");X(this,"scoreCache",new Ie(1e3));X(this,"resultCache",new Ie(200));X(this,"memoizedCalculateScore");this.options={...Kr,...t},this.memoizedCalculateScore=Je((r,n)=>this.calculateScoreInternal(r,n),(r,n)=>`${r.fullPath}:${n}`,1e3)}search(t,r){if(!r.trim())return[];const n=r.toLowerCase().trim(),i=`${t.length}:${n}:${JSON.stringify(this.options)}`,o=this.resultCache.get(i);if(o)return o;const a=Re.start("fuzzy-search"),l=[];for(const c of t){const h=this.memoizedCalculateScore(c,n);h>=this.options.minScore&&l.push({node:c,score:h,matchedSegments:this.getMatchedSegments(c,n)})}l.sort((c,h)=>Math.abs(h.score-c.score)<.001?c.node.fullPath.length-h.node.fullPath.length:h.score-c.score);const s=l.slice(0,this.options.maxResults);return this.resultCache.set(i,s),a(),s}calculateScore(t,r){return this.memoizedCalculateScore(t,r)}calculateScoreInternal(t,r){const n=t.name.toLowerCase(),i=t.fullPath.toLowerCase(),o=i.split("/");let a=0;n===r&&(a+=this.options.exactMatchBonus),n.startsWith(r)&&(a+=this.options.prefixMatchBonus);const l=this.calculateStringScore(n,r);a+=l*this.options.nameWeight;let s=0;for(const v of o){const y=this.calculateStringScore(v,r);s=Math.max(s,y)}a+=s*this.options.pathWeight;const c=this.calculateStringScore(i,r);a+=c*this.options.pathWeight*.5;const h=this.calculateSequenceScore(i,r);a+=h*this.options.sequenceWeight;const d=Math.max(0,i.length-r.length)*.01;return a=Math.max(0,a-d),a}calculateStringScore(t,r){if(!t||!r)return 0;let n=0,i=0,o=0,a=-1;for(let l=0;l<t.length&&i<r.length;l++)t[l]===r[i]&&(n+=1,i++,l===a+1?(o++,n+=o*.5):o=0,(l===0||t[l-1]==="/"||t[l-1]===" "||t[l-1]==="-"||t[l-1]==="_")&&(n+=2),a=l);return i===r.length&&(n+=10,t.includes(r)&&(n+=15)),n/Math.max(t.length,r.length)}calculateSequenceScore(t,r){if(!t||!r)return 0;let n=0,i=0,o=0;for(let a=0;a<t.length&&i<r.length;a++)t[a]===r[i]?(n+=Math.max(1,5-o),i++,o=0):o=Math.min(o+.1,3);return i===r.length&&(n+=5),n}getMatchedSegments(t,r){const n=[],i=t.fullPath.toLowerCase().split("/");for(const a of i)a.includes(r)&&n.push(a);const o=t.name.toLowerCase();return o.includes(r)&&!n.includes(o)&&n.push(o),n}updateOptions(t){this.options={...this.options,...t},this.scoreCache.clear(),this.resultCache.clear()}clearCache(){this.scoreCache.clear(),this.resultCache.clear()}getCacheStats(){return{scoreCache:this.scoreCache.size(),resultCache:this.resultCache.size()}}}const Wr=new Ct;function Ur(e,t,r){return r?new Ct(r).search(e,t):Wr.search(e,t)}var jr=S("<ul id=command-palette-results role=listbox>"),Hr=S('<p id=command-palette-no-results role=status aria-live=polite>No results found for "<!>".'),Gr=S('<div id=command-palette role=search aria-label="Command palette search"><label for=command-palette-input class=sr-only>Search for directories, actions, and settings</label><input id=command-palette-input type=text placeholder=Search... aria-describedby=command-palette-instructions role=combobox aria-autocomplete=list><div id=command-palette-instructions class=sr-only>Use arrow keys to navigate results, Enter to select, Escape to close'),Xr=S("<li role=option><span class=command-palette-result-name></span><span class=command-palette-result-path aria-hidden=true>"),qr=S("<span aria-hidden=true>/");const Jr=e=>{let t;return Xe(()=>{setTimeout(()=>{t&&_t(t)},10)}),(()=>{var r=Gr(),n=r.firstChild,i=n.nextSibling;i.nextSibling,i.$$input=a=>e.setSearchTerm(a.currentTarget.value);var o=t;return typeof o=="function"?qe(o,i):t=i,p(r,M(Z,{get when(){return e.searchResults().length>0},get children(){var a=jr();return p(a,M(Pe,{get each(){return e.searchResults()},children:(l,s)=>{const c=s()===e.selectedSearchResultIndex(),h=l.type;let d="";return h==="directory"?d="directory":h==="action"?d="action":h==="input"?d="input field":h==="virtual-directory"&&(d="virtual directory"),(()=>{var v=Xr(),y=v.firstChild,x=y.nextSibling;return v.$$click=()=>e.onSelect(l),De(v,`command-palette-result ${c?"selected":""}`),H(v,"aria-selected",c),p(y,()=>l.name,null),p(y,h==="directory"&&qr(),null),p(x,()=>l.fullPath),q(k=>{var _=`command-palette-result-${s()}`,B=`${l.name}, ${d}, path: ${l.fullPath}`;return _!==k.e&&H(v,"id",k.e=_),B!==k.t&&H(v,"aria-label",k.t=B),k},{e:void 0,t:void 0}),v})()}})),q(()=>H(a,"aria-label",`${e.searchResults().length} search results available`)),a}}),null),p(r,M(Z,{get when(){return ce(()=>e.searchResults().length===0)()&&e.searchTerm().length>0},get children(){var a=Hr(),l=a.firstChild,s=l.nextSibling;return s.nextSibling,p(a,()=>e.searchTerm(),s),a}}),null),q(a=>{var l=e.searchResults().length>0,s=e.searchResults().length>0?`command-palette-result-${e.selectedSearchResultIndex()}`:void 0;return l!==a.e&&H(i,"aria-expanded",a.e=l),s!==a.t&&H(i,"aria-activedescendant",a.t=s),a},{e:void 0,t:void 0}),q(()=>i.value=e.searchTerm()),r})()};ie(["input","click"]);var Yr=S("<p role=status aria-live=polite>This directory is empty."),Qr=S('<nav id=pagination-dots aria-label="Page navigation"role=navigation><div class=pagination-container><span class=sr-only>Page <!> of '),Zr=S('<div role=region aria-label="Directory contents"><ol id=main-nav-list role=list aria-label="Directory items">'),en=S("<li class=main-nav-item role=listitem><button><span class=nav-item-content><span class=nav-item-name></span></span><span class=keyboard-shortcut-indicator aria-hidden=true>"),tn=S("<span aria-hidden=true>/"),rn=S("<span class=nav-item-value aria-hidden=true>: "),nn=S("<span role=img>");const on=e=>(()=>{var t=Zr(),r=t.firstChild;return p(t,M(Z,{get when(){return e.paginatedItems().length===0},get children(){return Yr()}}),r),p(r,M(Pe,{get each(){return e.paginatedItems()},children:(n,i)=>{const o=n[1].type,a=n[1].name,l=o==="directory",s=o==="input",c=o==="action",h=o==="virtual-directory",d=s&&n[1].localStorageKey&&localStorage.getItem(n[1].localStorageKey)||"";let v="";return l?v=`Navigate to ${a} directory`:s?v=`Edit ${a} input field${d?`, value: ${d}`:""}`:h?v=`Load ${a} virtual directory`:c&&(v=`Execute ${a} action`),(()=>{var y=en(),x=y.firstChild,k=x.firstChild,_=k.firstChild,B=k.nextSibling;return x.$$click=()=>e.handleNavigate(n[0],n[1].type),H(x,"aria-label",v),De(x,`nav-item-button nav-item-${o}`),p(_,a,null),p(_,l&&tn(),null),p(_,s&&d&&(()=>{var C=rn();return C.firstChild,p(C,d,null),C})(),null),p(B,()=>i()+1),q(C=>{var R=`main-nav-item-${i()}`,T=i()+1;return R!==C.e&&H(y,"id",C.e=R),T!==C.t&&H(x,"data-keyboard-shortcut",C.t=T),C},{e:void 0,t:void 0}),y})()}})),p(t,M(Z,{get when(){return e.totalPages()>1},get children(){var n=Qr(),i=n.firstChild,o=i.firstChild,a=o.firstChild,l=a.nextSibling;return l.nextSibling,p(o,()=>e.currentPage()+1,l),p(o,()=>e.totalPages(),null),p(i,M(Pe,{get each(){return Array(e.totalPages()).fill(0)},children:(s,c)=>(()=>{var h=nn();return q(d=>{var v=`pagination-dot ${e.currentPage()===c()?"active":""}`,y=`Page ${c()+1}${e.currentPage()===c()?" (current)":""}`;return v!==d.e&&De(h,d.e=v),y!==d.t&&H(h,"aria-label",d.t=y),d},{e:void 0,t:void 0}),h})()}),null),n}}),null),t})();ie(["click"]);function Ye(e,t=""){const r=[];if(!e||typeof e!="object")return r.push({path:t||"root",message:"Directory tree must be a valid object"}),{isValid:!1,errors:r};const n=Object.entries(e);n.length>23&&r.push({path:t||"root",message:`Directory contains ${n.length} items, but maximum allowed is 23`});for(const[i,o]of n){const a=t?`${t}/${i}`:i;if(!o||typeof o!="object"){r.push({path:a,message:"Node must be a valid object"});continue}if((!o.name||typeof o.name!="string")&&r.push({path:a,message:"Node must have a valid name property"}),!o.type||typeof o.type!="string"){r.push({path:a,message:"Node must have a valid type property"});continue}const l=["directory","action","input","virtual-directory"];if(!l.includes(o.type)){r.push({path:a,message:`Invalid node type '${o.type}'. Valid types are: ${l.join(", ")}`});continue}switch(o.type){case"directory":if(o.children)if(typeof o.children!="object")r.push({path:a,message:"Directory node children must be a valid object"});else{const s=Ye(o.children,a);r.push(...s.errors)}break;case"action":o.action&&typeof o.action!="function"&&r.push({path:a,message:"Action node must have a valid action function"});break;case"input":o.localStorageKey&&typeof o.localStorageKey!="string"&&r.push({path:a,message:"Input node localStorageKey must be a string"});break;case"virtual-directory":o.onSelect&&typeof o.onSelect!="function"&&r.push({path:a,message:"Virtual directory node must have a valid onSelect function"});break}o.name&&i!==o.name&&r.push({path:a,message:`Key '${i}' does not match node name '${o.name}'`})}return{isValid:r.length===0,errors:r}}function Qe(e,t=!0){const r=Ye(e);if(!r.isValid&&t){const n=r.errors.map(i=>`${i.path}: ${i.message}`);throw new Error(`Directory tree validation failed:
${n.join(`
`)}`)}return r}var an=S("<div class=dirnav-error-boundary><div class=dirnav-error-content><h3>Something went wrong</h3><p>An unexpected error occurred in the navigation component.</p><details class=dirnav-error-details><summary>Error details</summary><pre></pre></details><div class=dirnav-error-actions><button class=dirnav-error-retry-btn>Try Again</button><button class=dirnav-error-reload-btn>Reload Page"),ln=S("<pre class=dirnav-error-stack>"),sn=S("<p class=dirnav-error-warning>This error has occurred <!> times. Consider reloading the page.");const Oe=e=>{const[t,r]=D(0),[n,i]=D(null),o=(s,c)=>{r(h=>h+1),i(s),console.error("ErrorBoundary caught an error:",s),e.onError&&e.onError(s,c)},a=()=>{r(0),i(null)},l=(s,c)=>(()=>{var h=an(),d=h.firstChild,v=d.firstChild,y=v.nextSibling,x=y.nextSibling,k=x.firstChild,_=k.nextSibling,B=x.nextSibling,C=B.firstChild,R=C.nextSibling;return p(_,()=>s.message),p(x,(()=>{var T=ce(()=>!!s.stack);return()=>T()&&(()=>{var K=ln();return p(K,()=>s.stack),K})()})(),null),je(C,"click",c),R.$$click=()=>window.location.reload(),p(d,(()=>{var T=ce(()=>t()>1);return()=>T()&&(()=>{var K=sn(),se=K.firstChild,m=se.nextSibling;return m.nextSibling,p(K,t,m),K})()})(),null),h})();return M(br,{fallback:s=>(o(s),(e.fallback||l)(s,a)),get children(){return e.children}})};ie(["click"]);var cn=S("<div class=dirnav-navigation-error><div class=dirnav-error-content><h3>Navigation Error</h3><details class=dirnav-error-details><summary>Technical details</summary><pre></pre></details><div class=dirnav-error-actions><button class=dirnav-error-retry-btn>Reset Navigation</button><button class=dirnav-error-home-btn>Go to Root"),dn=S("<div class=dirnav-error-specific><p>There's an issue with the directory structure:</p><ul><li>Directories cannot contain more than 23 items</li><li>All nodes must have valid types (directory, action, input, virtual-directory)</li><li>Directory nodes must have a 'children' property"),un=S("<div class=dirnav-error-specific><p>Unable to navigate to the requested location. This could be due to:</p><ul><li>Invalid directory path</li><li>Missing directory content</li><li>Corrupted navigation state");const hn=e=>M(Oe,{fallback:(n,i)=>{const o=n.message.includes("directory tree")||n.message.includes("validation")||n.message.includes("23 items"),a=n.message.includes("navigate")||n.message.includes("directory")||n.message.includes("path");return(()=>{var l=cn(),s=l.firstChild,c=s.firstChild,h=c.nextSibling,d=h.firstChild,v=d.nextSibling,y=h.nextSibling,x=y.firstChild,k=x.nextSibling;return p(s,o&&dn(),h),p(s,a&&!o&&un(),h),p(v,()=>n.message),x.$$click=()=>{e.onReset&&e.onReset(),i()},k.$$click=()=>{try{e.onReset&&e.onReset(),i()}catch(_){console.error("Failed to reset to home:",_),window.location.reload()}},l})()},onError:(n,i)=>{console.error("Navigation error occurred:",{error:n.message,stack:n.stack,errorInfo:i,timestamp:new Date().toISOString()}),e.onNavigationError&&e.onNavigationError(n)},get children(){return e.children}});ie(["click"]);var fn=S("<div class=dirnav-command-palette-error><div class=dirnav-error-content><h3>Command Palette Error</h3><details class=dirnav-error-details><summary>Technical details</summary><pre></pre></details><div class=dirnav-error-actions><button class=dirnav-error-retry-btn>Reset Search</button><button class=dirnav-error-close-btn>Close Command Palette"),mn=S("<div class=dirnav-error-specific><p>Search functionality encountered an error:</p><ul><li>Try clearing your search term</li><li>Check if the directory tree is valid</li><li>Some search results may be corrupted"),gn=S("<div class=dirnav-error-specific><p>Command execution failed:</p><ul><li>The selected command may be invalid</li><li>Required resources might be unavailable</li><li>Try selecting a different command");const pn=e=>M(Oe,{fallback:(n,i)=>{const o=n.message.includes("search")||n.message.includes("fuzzy")||n.message.includes("filter"),a=n.message.includes("command")||n.message.includes("action")||n.message.includes("execute");return(()=>{var l=fn(),s=l.firstChild,c=s.firstChild,h=c.nextSibling,d=h.firstChild,v=d.nextSibling,y=h.nextSibling,x=y.firstChild,k=x.nextSibling;return p(s,o&&mn(),h),p(s,a&&!o&&gn(),h),p(v,()=>n.message),x.$$click=()=>{e.onReset&&e.onReset(),i()},k.$$click=()=>{try{e.onReset&&e.onReset(),i()}catch(_){console.error("Failed to close command palette:",_)}},l})()},onError:(n,i)=>{console.error("Command palette error occurred:",{error:n.message,stack:n.stack,errorInfo:i,timestamp:new Date().toISOString()}),e.onSearchError&&e.onSearchError(n)},get children(){return e.children}});ie(["click"]);var vn=S("<div class=dirnav-virtual-directory-error><div class=dirnav-error-content><h3>Virtual Directory Error</h3><details class=dirnav-error-details><summary>Technical details</summary><pre></pre></details><div class=dirnav-error-actions><button class=dirnav-error-retry-btn>Retry Loading</button><button class=dirnav-error-fallback-btn>Use Fallback</button><button class=dirnav-error-back-btn>Go Back"),bn=S("<div class=dirnav-error-specific><p>Network or connection error:</p><ul><li>Check your internet connection</li><li>The remote service may be temporarily unavailable</li><li>Try again in a few moments"),yn=S("<div class=dirnav-error-specific><p>Async operation failed:</p><ul><li>The virtual directory loading timed out</li><li>An unexpected error occurred during data loading</li><li>Try refreshing or using a different approach"),wn=S("<div class=dirnav-error-specific><p>Data format error:</p><ul><li>The virtual directory returned invalid data</li><li>Data parsing failed</li><li>Contact the data provider for assistance");const xn=e=>M(Oe,{fallback:(n,i)=>{const o=n.message.includes("fetch")||n.message.includes("network")||n.message.includes("timeout")||n.message.includes("connection"),a=n.message.includes("Promise")||n.message.includes("async")||n.message.includes("await"),l=n.message.includes("parse")||n.message.includes("JSON")||n.message.includes("invalid data");return(()=>{var s=vn(),c=s.firstChild,h=c.firstChild,d=h.nextSibling,v=d.firstChild,y=v.nextSibling,x=d.nextSibling,k=x.firstChild,_=k.nextSibling,B=_.nextSibling;return p(c,o&&bn(),d),p(c,a&&!o&&yn(),d),p(c,l&&wn(),d),p(y,()=>n.message),k.$$click=()=>{e.onRetry&&e.onRetry(),i()},_.$$click=()=>{e.onFallback&&e.onFallback(),i()},B.$$click=()=>{try{e.onFallback&&e.onFallback(),i()}catch(C){console.error("Failed to go back:",C)}},s})()},onError:(n,i)=>{console.error("Virtual directory error occurred:",{error:n.message,stack:n.stack,errorInfo:i,timestamp:new Date().toISOString()}),e.onVirtualDirectoryError&&e.onVirtualDirectoryError(n)},get children(){return e.children}});ie(["click"]);class $n{constructor(t={}){X(this,"defaultOptions",{maxRetries:3,retryDelay:1e3,timeout:1e4,fallbackContent:{}});X(this,"lazyLoader",new Fr);X(this,"loadingKeys",new Set);this.options=t,this.options={...this.defaultOptions,...t}}async loadVirtualDirectory(t,r){const n={...this.options,...r},i=(r==null?void 0:r.key)||`virtual_${Date.now()}_${Math.random()}`;if(this.loadingKeys.has(i)&&!(r!=null&&r.forceReload))return await new Promise(a=>setTimeout(a,100)),this.loadVirtualDirectory(t,{...r,key:i});this.loadingKeys.add(i);const o=Re.start("virtual-directory-load");try{const a=await this.lazyLoader.load(i,async()=>{let l;for(let s=0;s<=n.maxRetries;s++)try{const c=await this.executeWithTimeout(t,n.timeout);if(!this.validateResult(c))throw new Error("Invalid virtual directory data structure");return c}catch(c){l=c,console.warn(`Virtual directory load attempt ${s+1} failed:`,c),s<n.maxRetries&&await this.delay(n.retryDelay*Math.pow(2,s))}throw l||new Error("Virtual directory loading failed")},{forceReload:r==null?void 0:r.forceReload,timeout:n.timeout+5e3});return a.data?{success:!0,data:a.data,retryCount:0,fromCache:!1}:{success:!1,error:a.error||new Error("Unknown error loading virtual directory"),retryCount:n.maxRetries}}finally{this.loadingKeys.delete(i),o()}}async executeWithTimeout(t,r){return new Promise((n,i)=>{const o=setTimeout(()=>{i(new Error(`Virtual directory loading timed out after ${r}ms`))},r);t().then(a=>{clearTimeout(o),n(a)}).catch(a=>{clearTimeout(o),i(a)})})}delay(t){return new Promise(r=>setTimeout(r,t))}getFallbackContent(){return this.options.fallbackContent||{error_fallback:{name:"Error Fallback",type:"action",action:()=>alert("Virtual directory failed to load. This is fallback content.")},cache_info:{name:"Cache Info",type:"action",action:()=>{const t=this.getCacheStats();console.log(`Virtual directory cache: ${t.size} items`)}}}}clearCache(){this.lazyLoader.clearCache()}getCacheStats(){return{size:this.lazyLoader.getCacheSize()}}isLoading(t){return this.lazyLoader.isLoading(t)||this.loadingKeys.has(t)}createLoadingState(t="Loading..."){return{loading:{name:t,type:"action",action:()=>{}}}}validateResult(t){if(!t||typeof t!="object")return!1;for(const r in t){const n=t[r];if(!n||typeof n!="object"||!n.type||!["directory","action","input","virtual-directory"].includes(n.type))return!1}return!0}}const he=new $n({maxRetries:2,retryDelay:1e3,timeout:8e3,fallbackContent:{connection_error:{name:"Connection Error",type:"action",action:()=>alert("Failed to load virtual directory. Please check your connection and try again.")},retry_action:{name:"Retry Loading",type:"action",action:()=>window.location.reload()}}});var Sn=S("<small>Retry attempt "),kn=S("<div class=dirnav-loading-error><small>Previous attempt failed: "),_n=S("<div class=dirnav-error-loading><span>Loading virtual directory..."),Cn=S('<div id=input-mode-container role=dialog aria-labelledby=input-mode-label aria-describedby=input-mode-instructions><label id=input-mode-label for=input-mode-input>Enter value for <!>:</label><div id=input-mode-instructions class=sr-only>Type your value and press Enter to save, or Escape to cancel</div><input id=input-mode-input type=text aria-required=false aria-describedby=input-mode-instructions><div id=input-mode-controls role=group aria-label="Input actions"><button id=input-mode-cancel-button aria-label="Cancel input and return to navigation">Cancel</button><button id=input-mode-save-button aria-label="Save input value">Save');const Et=Je((e,t=[])=>{let r=[];for(const n in e){const i=e[n],o=[...t,i.name],a=o.join("/");r.push({...i,fullPath:a}),i.type==="directory"&&i.children&&(r=r.concat(Et(i.children,o)))}return r},(e,t)=>`${JSON.stringify(Object.keys(e))}_${t==null?void 0:t.join("/")}`),En=Et,Ge=(e,t,r=[])=>{for(const n in e){const i=e[n],o=[...r,i.name];if(o.join("/")===t)return{node:i,parentContent:e,parentPath:r};if(i.type==="directory"&&i.children){const l=Ge(i.children,t,o);if(l.node)return l}}return{node:void 0,parentContent:void 0,parentPath:[]}},pe=e=>{const t={};for(const r in e){const n=e[r];typeof n=="object"&&!Array.isArray(n)&&n!==null?n.type==="directory"?t[r]={name:r,...n,children:pe(n.children)}:t[r]={name:r,...n}:t[r]={name:r,type:"action",action:n}}return Qe(t),t},Tn=e=>{Qe(e.initialTree);const[t,r]=D([]),[n,i]=D(0),[o,a]=D(e.initialTree),[l,s]=D([]),[c,h]=D(!1),[d,v]=D(!0),[y,x]=D(!1),[k,_]=D(null),[B,C]=D(""),[R,T]=D(!1),[K,se]=D(""),[m,$]=Or("",150),[O,P]=D([]),[U,z]=D(0),[Y,oe]=D(localStorage.getItem("dirnav-component-theme-preference")||"system"),[A,L]=D([{name:"~",path:"/",isClickable:!0}]),[W,j]=D(null),[ae,te]=D(0),[Tt,de]=D(null);let N,fe,Pt;const Ze=kt(),Dt="dirnav-component-theme-preference",et="dirnav-dark-mode",Mt="(prefers-color-scheme: dark)",Ve=f=>{oe(f),localStorage.setItem(Dt,f)},It=()=>{const f=Y();return f==="system"?window.matchMedia(Mt).matches?et:"":f==="dark"?et:""},Rt=J(()=>{const f=Re.start("flatten-tree"),u=En(e.initialTree),b=[{name:"meta",type:"directory",fullPath:"meta"},{name:"theme",type:"directory",fullPath:"meta/theme"},{name:"Light",type:"action",fullPath:"meta/theme/Light",action:()=>Ve("light")},{name:"Dark",type:"action",fullPath:"meta/theme/Dark",action:()=>Ve("dark")},{name:"System",type:"action",fullPath:"meta/theme/System",action:()=>Ve("system")}];return f(),[...u,...b]}),At={maxResults:50,minScore:.01,pathWeight:.4,nameWeight:.6,sequenceWeight:2,exactMatchBonus:100,prefixMatchBonus:50},Nt=Je((f,u)=>u?Ur(f,u,At).map(g=>g.node):[],(f,u)=>`${f.length}_${u}`),zt=f=>Nt(Rt(),f),Q=f=>{se(f),$(f)};me(()=>{if(R()){const f=m();P(zt(f)),z(0)}});const Fe=9,tt=8,Lt=7,Ot=8,rt=J(()=>Object.entries(o())),nt=J(()=>rt().length),Vt=J(()=>{const f=nt();return f<=Fe?1:f<=17?2:3}),it=J(()=>{const f=Re.start("pagination"),u=rt(),b=n(),g=nt();let w=0,E=0,V=[];return b===0?(w=0,g<=Fe?E=g:E=tt,V=u.slice(w,E),g>Fe&&V.push(["next_page",{name:"Next Page",type:"action",action:()=>i(b+1)}])):b===1?(w=tt,E=w+Lt,V=u.slice(w,E),V.unshift(["prev_page",{name:"Previous Page",type:"action",action:()=>i(b-1)}]),g>15&&V.push(["next_page",{name:"Next Page",type:"action",action:()=>i(b+1)}])):b===2&&(w=15,E=w+Ot,V=u.slice(w,E),V.unshift(["prev_page",{name:"Previous Page",type:"action",action:()=>i(b-1)}])),f(),V}),Ft=100,ot={PREV_PAGE:"prev_page",NEXT_PAGE:"next_page"},at=Vr(async(f,u)=>{if(f===ot.PREV_PAGE){i(g=>g-1);return}if(f===ot.NEXT_PAGE){i(g=>g+1);return}const b=o()[f];if(b)switch(u){case"directory":s([...l(),o()]),r([...t(),f]),a(b.children||{}),i(0);break;case"action":b.action&&b.action();break;case"input":x(!0),_(f),C(localStorage.getItem(b.localStorageKey||"")||"");break;case"virtual-directory":if(b.onSelect){h(!0),j(null);try{de({name:f,loader:b.onSelect});const g=await he.loadVirtualDirectory(b.onSelect,{key:`${t().join("/")}_${f}`,forceReload:!1});if(g.success&&g.data)s([...l(),o()]),a(g.data),r([...t(),f]),i(0),te(0),de(null);else{const w=he.getFallbackContent();s([...l(),o()]),a(w),r([...t(),`${f} (Fallback)`]),i(0),j(g.error||new Error("Unknown virtual directory error")),te(g.retryCount)}}catch(g){throw console.error("Error loading virtual directory:",g),j(g),h(!1),g}finally{h(!1)}}break}},Ft),Be=()=>{if(y()){x(!1),C(""),_(null),N&&re(N);return}const f=l();if(f.length>0){const u=f[f.length-1];s(f.slice(0,-1)),a(u),r(t().slice(0,-1)),i(0)}else r([]),a(e.initialTree),i(0)},Bt=f=>{const u=f.split("/").slice(1);let b=e.initialTree,g=[];if(u.length>0){let w=e.initialTree;for(let E=0;E<u.length;E++){const V=u[E];if(w[V]&&w[V].type==="directory")g.push(w),w=w[V].children||{};else{console.warn(`Invalid breadcrumb path: ${f}`);return}}b=w}r(u),s(g),a(b),i(0)},Kt="~",Wt=4,Ut="...",jt=J(()=>{const f=t(),u=[Kt,...f];return(u.length>Wt?[Ut,...u.slice(-3)]:u).map((g,w)=>({name:g,path:u.slice(0,w+1).join("/"),isClickable:!0}))});me(()=>{L(jt())}),me(()=>{y()&&fe&&setTimeout(()=>fe&&_t(fe),0)}),me(()=>{R()});const lt=()=>{const f=o()[k()];f&&f.localStorageKey&&localStorage.setItem(f.localStorageKey,B()),ct()},st=()=>{ct()},ct=()=>{x(!1),C(""),_(null),N&&re(N)},Ht=f=>{N&&Rr(f,N,(u,b)=>{if(u.ctrlKey&&u.key==="`"){u.preventDefault(),d()?b?(v(!1),N&&We(N)):N&&re(N):(v(!0),setTimeout(()=>N&&re(N),0));return}if(!(!d()||!b)){if(R()){if(u.key==="Escape")u.preventDefault(),K()?(Q(""),P([]),z(0)):(T(!1),v(!1),N&&We(N));else if(u.key==="Enter"){u.preventDefault();const g=O()[U()];if(g){if(g.fullPath.startsWith("meta/"))g.action&&g.action(),r([]),a(e.initialTree),i(0);else{const{node:w,parentContent:E,parentPath:V}=Ge(e.initialTree,g.fullPath);w&&E?(s([]),r(V),a(E),i(0),w.type==="action"&&w.action&&w.action(),w.type==="input"&&(x(!0),_(w.name),C(localStorage.getItem(w.localStorageKey||"")||"")),setTimeout(()=>{y()||(r([]),a(e.initialTree),i(0),N&&re(N))},0)):console.error("Could not find selected node in tree:",g)}T(!1),Q(""),P([]),z(0),y()||N&&re(N)}}else u.key==="ArrowUp"?(u.preventDefault(),z(g=>Math.max(0,g-1))):u.key==="ArrowDown"?(u.preventDefault(),z(g=>Math.min(O().length-1,g+1))):u.key==="Backspace"&&(u.preventDefault(),Q(K().slice(0,-1)));return}if(y()){u.key==="Enter"?(u.preventDefault(),lt()):u.key==="Escape"?(u.preventDefault(),st()):u.key==="Backspace"&&(u.preventDefault(),C(B().slice(0,-1)));return}if(u.key==="Backspace")u.preventDefault(),Be();else if(u.key==="`")u.preventDefault(),T(!0),Q(""),P([]),z(0);else if(u.key>="1"&&u.key<="9"){u.preventDefault();const g=parseInt(u.key)-1,w=it();g===0&&w[0]&&w[0][0]==="prev_page"?i(E=>E-1):g===8&&w[w.length-1]&&w[w.length-1][0]==="next_page"?i(E=>E+1):w[g]&&at(w[g][0],w[g][1].type)}else u.key==="Escape"&&(u.preventDefault(),v(!1),N&&We(N))}})};Xe(()=>{Ze.addEventListener("document","keydown",Ht)}),Ne(()=>{Ze.removeAllEventListeners()});const dt=()=>{r([]),a(e.initialTree),i(0),s([]),T(!1),x(!1),Q(""),P([]),z(0),C(""),_(null)},Gt=f=>{console.error("Navigation error in DirnavUI:",f),dt()},Xt=f=>{console.error("Command palette error in DirnavUI:",f),T(!1),Q(""),P([]),z(0)},qt=f=>{console.error("Virtual directory error in DirnavUI:",f),h(!1),j(f),Be()},Jt=async()=>{const f=Tt();if(!f){console.warn("No failed virtual directory to retry");return}h(!0),j(null);try{const u=await he.loadVirtualDirectory(f.loader,{key:`retry_${f.name}_${Date.now()}`,forceReload:!0});u.success&&u.data?(a(u.data),te(0),de(null),console.log("Virtual directory retry successful")):(j(u.error||new Error("Retry failed")),te(u.retryCount))}catch(u){console.error("Virtual directory retry failed:",u),j(u)}finally{h(!1)}},Yt=()=>{const f=he.getFallbackContent();a(f),j(null),de(null),console.log("Using fallback content for virtual directory")};return M(Oe,{onError:f=>console.error("Top-level DirnavUI error:",f),get children(){return M($t.Provider,{value:{title:A,setTitle:Bt},get children(){return M(Z,{get when(){return d()},get children(){return M(hn,{onNavigationError:Gt,onReset:dt,get children(){return M(Lr,{onBack:Be,get backButtonDisabled(){return t().length===0},get commandPaletteMode(){return R()},onCommandPalette:()=>{R()?(T(!1),Q(""),P([]),z(0),N&&re(N)):(T(!0),Q(""),P([]),z(0))},ref:f=>N=f,onClose:()=>v(!1),get componentThemeClass(){return It()},get children(){return[M(xn,{onVirtualDirectoryError:qt,onRetry:Jt,onFallback:Yt,get children(){return M(Z,{get when(){return c()},get children(){var f=_n();return f.firstChild,p(f,M(Z,{get when(){return ae()>0},get children(){var u=Sn();return u.firstChild,p(u,ae,null),u}}),null),p(f,M(Z,{get when(){return W()},get children(){var u=kn(),b=u.firstChild;return b.firstChild,p(b,()=>{var g;return(g=W())==null?void 0:g.message},null),u}}),null),f}})}}),M(Z,{get when(){return R()},get children(){return M(pn,{onSearchError:Xt,onReset:()=>{T(!1),Q(""),P([]),z(0),N&&re(N)},get children(){return M(Jr,{searchTerm:K,setSearchTerm:Q,searchResults:O,selectedSearchResultIndex:U,onSelect:async f=>{const u=f;if(u){if(u.fullPath.startsWith("meta/"))u.action&&u.action(),r([]),a(e.initialTree),i(0);else{const{node:b,parentContent:g,parentPath:w}=Ge(e.initialTree,u.fullPath);if(b&&g)if(s([]),b.type==="directory"){const E=u.fullPath.split("/");r(E),a(b.children||{}),i(0)}else if(b.type==="virtual-directory"){if(b.onSelect){h(!0),j(null),de({name:b.name,loader:b.onSelect});try{const E=await he.loadVirtualDirectory(b.onSelect,{key:`command_palette_${u.fullPath}`,forceReload:!1});if(E.success&&E.data){const V=u.fullPath.split("/");r(V),a(E.data),i(0),te(0),de(null)}else{const V=he.getFallbackContent(),$e=u.fullPath.split("/");r([...$e,"(Fallback)"]),a(V),i(0),j(E.error||new Error("Unknown virtual directory error")),te(E.retryCount)}}catch(E){throw console.error("Error loading virtual directory:",E),j(E),E}finally{h(!1)}}}else b.type==="action"?(r(w),a(g),i(0),b.action&&b.action()):b.type==="input"&&(r(w),a(g),i(0),x(!0),_(b.name),C(localStorage.getItem(b.localStorageKey||"")||""));else throw console.error("Could not find selected node in tree:",u),new Error(`Could not find selected node: ${u.fullPath}`)}T(!1),Q(""),P([]),z(0),y()||setTimeout(()=>{N&&re(N)},0)}}})}})}}),M(Z,{get when(){return y()},get children(){var f=Cn(),u=f.firstChild,b=u.firstChild,g=b.nextSibling;g.nextSibling;var w=u.nextSibling,E=w.nextSibling,V=E.nextSibling,$e=V.firstChild,Qt=$e.nextSibling;p(u,k,g),E.$$input=Zt=>C(Zt.currentTarget.value);var ut=fe;return typeof ut=="function"?qe(ut,E):fe=E,$e.$$click=st,Qt.$$click=lt,q(()=>E.value=B()),f}}),M(Z,{get when(){return ce(()=>!c()&&!y())()&&!R()},get children(){return M(on,{paginatedItems:it,totalPages:Vt,currentPage:n,handleNavigate:at})}})]}})}})}})}})}})};ie(["input","click"]);var Pn=S("<button>Light mode"),Dn=S("<button>Dark mode"),Mn=S("<button>System Default");const ve=e=>{const t=document.body;e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?t.classList.add("dark-mode"):t.classList.remove("dark-mode"):e==="dark"?t.classList.add("dark-mode"):t.classList.remove("dark-mode"),localStorage.setItem("dirnav-theme-preference",e)},In=localStorage.getItem("dirnav-theme-preference")||"system";ve(In);window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("dirnav-theme-preference")==="system"&&ve("system")});const Rn=()=>{const e=pe({home:{type:"directory",children:{documents:{type:"directory",children:{"report.pdf":{type:"action",action:()=>alert("Opening report.pdf")},"notes.txt":{type:"action",action:()=>alert("Opening notes.txt")}}},pictures:{type:"directory",children:{vacation:{type:"action",action:()=>alert("Viewing vacation pictures")}}},settings:{type:"input",localStorageKey:"dirnav-settings-input"},large_directory:{type:"directory",children:{item1:{type:"action",action:()=>alert("Item 1")},item2:{type:"action",action:()=>alert("Item 2")},item3:{type:"action",action:()=>alert("Item 3")},item4:{type:"action",action:()=>alert("Item 4")},item5:{type:"action",action:()=>alert("Item 5")},item6:{type:"action",action:()=>alert("Item 6")},item7:{type:"action",action:()=>alert("Item 7")},item8:{type:"action",action:()=>alert("Item 8")},item9:{type:"action",action:()=>alert("Item 9")},item10:{type:"action",action:()=>alert("Item 10")}}},virtual_data:{type:"virtual-directory",onSelect:async()=>new Promise(r=>{setTimeout(()=>{r(pe({fetched_item1:{type:"action",action:()=>alert("Fetched Item 1")},fetched_item2:{type:"action",action:()=>alert("Fetched Item 2")},sub_virtual:{type:"virtual-directory",onSelect:()=>pe({nested_fetched_item:{type:"action",action:()=>alert("Nested Fetched Item")}})}}))},1e3)})}}},about:{type:"action",action:()=>alert("About this application")},exit:{type:"action",action:()=>alert("Exiting application")},NT:{type:"input",localStorageKey:"dirnav-note-input"}}),t=Pr(()=>[(()=>{var r=Pn();return r.$$click=()=>ve("light"),r})(),(()=>{var r=Dn();return r.$$click=()=>ve("dark"),r})(),(()=>{var r=Mn();return r.$$click=()=>ve("system"),r})(),M(Tn,{initialTree:e})],{hostId:"dirnav-host",attachToBody:!0});window.dirnavShadowWrapper=t};typeof window<"u"&&(window.validateDirectoryTree=Ye,window.validateDirectoryTreeStrict=Qe,window.createDirTree=pe);Rn();ie(["click"]);
